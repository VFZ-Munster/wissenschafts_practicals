<script>
  document.addEventListener("DOMContentLoaded", function () {
    const path = window.location.pathname;
    const repoName = "/wissenschafts_practicals";
    
    // Determine if we are currently in German mode
    // This logic covers both local (/de/...) and GH Pages (/repo/de/...)
    const isGerman = path.includes("/de/") || path.endsWith("/de");

    const links = document.querySelectorAll('.navbar-nav .nav-link');
    
    links.forEach(link => {
      const text = link.textContent.trim();
      
      if (text === "Deutsch" && !isGerman) {
        // Switching to German
        let newPath;
        if (path.startsWith(repoName)) {
            // GitHub Pages deployment
            // Insert /de after the repo name
            // e.g. /wissenschafts_practicals/index.html -> /wissenschafts_practicals/de/index.html
            newPath = path.replace(repoName, repoName + "/de");
        } else {
            // Local development or root domain
            // Prepend /de
            newPath = "/de" + path;
        }
        link.setAttribute('href', newPath);
        
      } else if (text === "English" && isGerman) {
        // Switching to English
        let newPath = path;
        
        if (newPath.includes(repoName + "/de")) {
             // GitHub Pages: /wissenschafts_practicals/de/... -> /wissenschafts_practicals/...
             newPath = newPath.replace(repoName + "/de", repoName);
        } else if (newPath.startsWith("/de")) {
             // Local: /de/... -> /...
             newPath = newPath.replace(/^\/de/, "");
        }
        
        if (newPath === "") newPath = "/";
        link.setAttribute('href', newPath);
      }
    });
  });
</script>
